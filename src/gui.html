<div>
    <div v-if="context.projectId !== data.targetProject.id" style="color: red;">
        This app session is only for project {{data.targetProject.name}} (id = {{data.targetProject.id}})
    </div>
    <div id="mark-reference-objects-for-retail" v-if="context.projectId === data.targetProject.id">
        <sly-style>
            #mark-reference-objects-for-retail {

            }
            #small_table.tiny-table table thead th {
            font-size: 10px;
            }
            #small_table.tiny-table table {
            font-size: 11px;
            }
            #small_tabs .el-tabs__item {
            font-size: 10px;
            font-weight: 500;
            height: 30px;
            line-height: 30px;
            }
            #small_tabs .el-tabs__header {
            background: white;
            position: fixed;
            width: 100%;
            z-index: 1;
            margin-top: 30px;
            }

            #small_tabs .el-tabs__content {
            padding-top: 65px;
            }

            #mark-reference-objects-for-retail .app-header {
            background: white;
            position: fixed;
            width: 100%;
            z-index: 1;
            }

        </sly-style>
        <div class="app-header">
            <div class="fflex">
                <el-button
                        class="mt5 ml5 mb15"
                        type="primary"
                        size="mini"
                        :disabled="context.figureId === null ||
                                   state.referenceTag.length === 0 ||
                                   context.figureClassTitle !== state.targetClass"
                        @click="command('assign_tag_to_object')">
                    Tag
                </el-button>
                <el-button
                        class="mt5 ml5 mb15"
                        type="warning"
                        size="mini"
                        :disabled="context.figureId === null ||
                                   state.multiselectClass === '' ||
                                   context.figureClassTitle !== state.multiselectClass"
                        @click="command('multi_assign_tag_to_objects')">
                    Tag multiselect
                </el-button>
                <el-button
                        class="mt5 ml5 mb15"
                        type="primary"
                        size="mini">
                    Finish group
                </el-button>
            </div>
        </div>
        <el-tabs id="small_tabs" v-model="state.selectedTab">
            <el-tab-pane label="PRODUCT" name="product" class="ml5">
                <div v-if="data.fieldNotFound.length > 0" style="color:red;">{{data.fieldNotFound}}</div>
                <div v-if="data.fieldNotFound.length === 0" class="info">
<!--                    <div>{{data.previewRefs.content.annotations}}</div>-->
<!--                    <pre>{{context}}</pre>-->
                    <div v-if="context.imageId in data.processedImages" style="color: green">Image processed</div>
                    <div class="mt10" style="color: green; font-weight: 500;">IMAGE FIELD:</div>
                    <b style="color: #777777;">{{state.fieldName}}</b>: {{data.fieldValue}}
                    <div class="mt10" style="color: green; font-weight: 500;">CATALOG INFO:</div>
                    <div v-for="v,k in data.catalogInfo">
                        <b style="color: #777777;">{{k}}</b>: {{v}}
                    </div>
                    <div class="mt10" style="color: green; font-weight: 500;">
                        REFERENCES: {{data.refCount}} found
                    </div>
                    <sly-grid-gallery v-if="data.refCount > 0"
                                      :content="data.previewRefs.content"
                                      :options="data.previewRefs.options"
                                      :value="state.selectedCard"
                                      @input="state.selectedCard = $event; command('card')"/>
                </div>
            </el-tab-pane>
            <el-tab-pane label="CATALOG" name="catalog" class="ml5">
                <span slot="label"><i class="zmdi zmdi-view-list-alt"></i> CATALOG</span>
                <sly-table id="small_table"
                           :options="{perPage: state.perPage, pageSizes: [5, 10, 20, 50, 100]}"
                           :content="data.catalog"
                           :key="state.perPage"
                ></sly-table>
            </el-tab-pane>
            <el-tab-pane label="SETTINGS" name="settings" class="ml5">
                <!--            :disabled="context.userId !== data.ownerId">-->
                <span slot="label"><i class="zmdi zmdi-settings"></i> SETTINGS</span>
                <div class="fflex mr5">
                    <div style="min-width:100px;">Match field:</div>
                    <el-input v-model="state.fieldName" size="small"></el-input>
                </div>
                <div class="fflex mt5 mr5">
                    <div style="min-width:100px;">Match column:</div>
                    <el-select v-model="state.columnName" filterable size="small">
                        <el-option
                                v-for="item in data.catalog.columns"
                                :key="item"
                                :label="item"
                                :value="item">
                        </el-option>
                    </el-select>
                </div>
                <div class="fflex mt5 mr5">
                    <div style="min-width:100px;">Rows per page:</div>
                    <el-input-number size="small" :min="5" v-model="state.perPage"></el-input-number>
                </div>
                <div class="fflex mt5 mr5">
                    <div style="min-width:100px;">Target class:</div>
                    <el-select v-model="state.targetClass" filterable size="small">
                        <el-option
                                v-for="item in data.objectClasses"
                                :key="item"
                                :label="item"
                                :value="item">
                        </el-option>
                    </el-select>
                </div>
                <div class="fflex mt5 mr5">
                    <div style="min-width:100px;">Reference tag:</div>
                    <el-select v-model="state.referenceTag" filterable size="small">
                        <el-option
                                v-for="item in data.tags"
                                :key="item"
                                :label="item"
                                :value="item">
                        </el-option>
                    </el-select>
                </div>
                <div class="fflex mt5 mr5">
                    <div style="min-width:100px;">Multiselect class:</div>
                    <el-select v-model="state.multiselectClass" filterable size="small">
                        <el-option
                                v-for="item in data.objectClasses"
                                :key="item"
                                :label="item"
                                :value="item">
                        </el-option>
                    </el-select>
                </div>
                <el-button
                        class="mt5"
                        type="primary"
                        size="mini"
                        @click="command('reindex_references')"
                        :loading="data.reindexing">
                    Re-Index existing references
                </el-button>
                <b style="color: #777777; margin-top: 10px;">{{data.referencesCount}}</b> reference objects
            </el-tab-pane>
        </el-tabs>
    </div>
</div>